"use strict";(self.webpackChunkreact_simple_movie=self.webpackChunkreact_simple_movie||[]).push([[651],{4453:function(e,t,n){n(2791);var a=n(3504),r=n(184);t.Z=function(e){var t=e.onClick,n=e.className,i=e.children,o=e.fluid,s=e.outline,c=void 0!==s&&s,l=e.to,d=void 0===l?"":l,u=e.loading,f=void 0!==u&&u,p=(0,r.jsx)("button",{onClick:t,className:"".concat(f?"opacity-60 pointer-events-none":" hover:opacity-90"," ").concat(c?"bg-transparent text-primary border border-primary":"bg-primary text-white"," duration-100 py-3 px-6 rounded-lg capitalize  gap-1  flex items-center justify-center ").concat(n," ").concat(o?"w-full":"w-auto"),children:f?(0,r.jsx)("span",{children:"Loading . . ."}):i});return d?(0,r.jsx)(a.rU,{to:d,children:p}):p}},8086:function(e,t,n){var a=n(885),r=n(2791),i=n(8820),o=n(184);t.Z=function(e){var t=e.placeholder,n=void 0===t?"Placeholder":t,s=e.icon,c=void 0!==s&&s,l=e.defaultValue,d=void 0===l?"":l,u=e.onChange,f=void 0===u?function(){}:u,p=(0,r.useState)(!1),v=(0,a.Z)(p,2),x=v[0],m=v[1];return(0,o.jsxs)("div",{className:"flex items-center px-3 py-3 overflow-hidden border rounded-md",children:[(0,o.jsx)("input",{type:c?x?"text":"password":"text",className:"flex-1 bg-transparent outline-none ",placeholder:n,defaultValue:d,onChange:f}),c&&(0,o.jsx)("span",{className:"px-5 cursor-pointer text-primary",onClick:function(){m(!x)},children:x?(0,o.jsx)(i.p3W,{size:20}):(0,o.jsx)(i.w8I,{size:20})})]})}},1758:function(e,t,n){n(2791);var a=n(184);t.Z=function(e){var t=e.children,n=e.className,r=void 0===n?"text-slate-900":n;return(0,a.jsx)("div",{className:"text-left capitalize ".concat(r),children:t})}},8729:function(e,t,n){n(2791);var a=n(3504),r=n(3197),i=n(4453),o=n(9126),s=n(2419),c=n(6902),l=n(199),d=n(4809),u=n(184);t.Z=function(e){var t=e.movieid,n=e.item,f=void 0===n?"":n,p=e.mediaType,v={mediaType:p},x=(0,s.ZP)(r.bl.getMoviebyID(t,p),r._i),m=x.data,h=(x.error,t?m:f),g=null===h||void 0===h?void 0:h.title,j=null===h||void 0===h?void 0:h.vote_average,b=null===h||void 0===h?void 0:h.release_date,y=null===h||void 0===h?void 0:h.poster_path,N=null===h||void 0===h?void 0:h.name,w=null===h||void 0===h?void 0:h.first_air_date,k=null===h||void 0===h?void 0:h.id,Z=(0,c.s)(k);return h&&(0,u.jsxs)("div",{className:"flex flex-col h-full p- text-white rounded-lg select-none movie-card bg-slate-400",children:[(0,u.jsxs)("div",{className:"relative",children:[Z?(0,u.jsx)("div",{className:"absolute flex items-center justify-center w-8 h-8 rounded-full cursor-pointer bg-primary top-3 right-3",children:(0,u.jsx)(d.Z,{id:k,mediaType:p})}):(0,u.jsx)(l.m,{id:k,mediaType:p}),(0,u.jsx)("img",{className:"w-full object-cover rounded-lg mb-5 max-h-[600px]",src:r.bl.getImageUrl(y,"w500"),alt:""})]}),(0,u.jsx)("h3",{className:"mb-3 text-xl text-bold",children:g||N}),(0,u.jsxs)("div",{className:"flex flex-col justify-end flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-5 text-sm opacity-50",children:[(0,u.jsx)("span",{children:new Date(b||w).getFullYear()}),(0,u.jsxs)("span",{className:"flex items-center gap-1",children:[j&&j.toFixed(1),(0,u.jsx)(o.kum,{})]})]}),(0,u.jsx)(a.rU,{to:"/".concat(p,"/").concat(k),state:v,children:(0,u.jsx)(i.Z,{fluid:!0,children:"go to movie details"})})]})]})}},3197:function(e,t,n){n.d(t,{KM:function(){return r},_i:function(){return a},bl:function(){return s}});var a=function(e){return fetch(e).then((function(e){return e.json()}))},r="https://tl-movie.vercel.app",i="3d673b2d8e40eafc68577fae5a6a1f4b",o="https://api.themoviedb.org/3",s={getMoviebyID:function(e,t){return"".concat(o,"/").concat(t,"/").concat(e,"?api_key=").concat(i)},getMovieSearch:function(e){return"".concat(o,"/search/movie?api_key=").concat(i,"&query=").concat(e)},getMovieList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";return"popular"===e||"top_rated"===e||"now_playing"===e?"".concat(o,"/").concat(n,"/").concat(e,"?api_key=").concat(i,"&page=").concat(t):"discover"===e?" ".concat(o,"/").concat(e,"/").concat(n,"?api_key=").concat(i,"&page=").concat(t):" ".concat(o,"/").concat(e,"/").concat(n,"/day?api_key=").concat(i,"&page=").concat(t)},getMovieDetail:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"movie";return"".concat(o,"/").concat(t,"/").concat(e,"?api_key=").concat(i)},getImageUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"original";return"https://image.tmdb.org/t/p/".concat(t,"/").concat(e)},getDetailMeta:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"movie";return"".concat(o,"/").concat(n,"/").concat(e,"/").concat(t,"?api_key=").concat(i)},getYoutubeVideo:function(e){return"https://www.youtube.com/embed/".concat(e)}}},6902:function(e,t,n){n.d(t,{s:function(){return r}});n(2791);var a=n(1665),r=function(e){var t=(0,a.a)().userInfo;return!(!t||!e)&&!!(t.listFavorite&&t.listFavorite.find((function(t){return t.id===e})))}},8651:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var a=n(4165),r=n(5861),i=n(885),o=n(9062),s=n(2791),c=n(4453),l=n(8729),d=n(1665),u=n(9872);function f(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1;return t.getDate()+"-"+a+"-"+n}var p=n(2506),v=(n(1724),n(9085)),x=n(1758),m=n(8086),h=n(1367),g=n(497),j=n(3002),b=n(184),y=(0,g.cF)(),N=function(){var e=(0,d.a)().userInfo,t=null===e||void 0===e?void 0:e.listFavorite,n=(0,s.useState)(!1),N=(0,i.Z)(n,2),w=N[0],k=(N[1],(0,s.useState)("")),Z=(0,i.Z)(k,2),_=Z[0],U=Z[1],F=(0,s.useState)((null===e||void 0===e?void 0:e.image)||u),C=(0,i.Z)(F,2),I=C[0],M=C[1],S=(0,s.useState)(!1),D=(0,i.Z)(S,2),L=D[0],Y=D[1],T=(0,s.useState)(""),A=(0,i.Z)(T,2),V=A[0],J=A[1];return(0,s.useEffect)((function(){var t=function(){var t=(0,r.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(V){t.next=2;break}return t.abrupt("return",null);case 2:return n=(0,o.JU)(h.db,"users",null===e||void 0===e?void 0:e.id),t.next=5,(0,o.r7)(n,{displayName:null!==V&&void 0!==V&&V.fullName?V.fullName.trim():e.fullName,image:I||"",password:null===V||void 0===V?void 0:V.password});case 5:(0,j.ck)(h.I.currentUser,{displayName:V.fullName,photoURL:I,password:V.password}),(0,j.gQ)(h.I.currentUser,V.password),Y(!1),v.Am.success("Your profile has updated!",{pauseOnHover:!1,autoClose:1500}),v.Am.success("Please re-signin",{pauseOnHover:!1,autoClose:1500});case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[I]),(0,s.useEffect)((function(){return function(){_&&URL.revokeObjectURL(_.preview)}}),[_]),(0,b.jsx)("div",{className:" page-container",children:(0,b.jsx)("div",{className:"px-5 py-5 border border-gray-500 xs:mt-10 rounded-xl",children:e?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"gap-10 mb-5 text-center xs:text-left xs:flex",children:[(0,b.jsx)("div",{className:"xs:-translate-y-16 ",children:(0,b.jsx)("img",{src:e.image||u,className:"w-32 h-32 mx-auto border rounded-full shadow-md xs:mx-0",alt:""})}),(0,b.jsx)("div",{className:" justify-between gap-3 flex-1 flex flex-col min-w-[700px]:flex-row",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-xl font-semibold xs:text-3xl",children:e.displayName}),(0,b.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Join ",(0,b.jsx)("span",{className:"text-primary",children:"APP Movie"})," at"," ",f(e.createdAt&&e.createdAt.seconds)]})]})})]}),(0,b.jsx)(p.J9,{initialValues:{fullName:e.displayName,password:e.password},onSubmit:function(e){Y(!0),J(e),function(e){if(_){if(_){var t=_,n=(0,g.iH)(y,"images/"+t.name),a=(0,g.B0)(n,t);a.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break;default:console.log("Nothing")}}),(function(e){console.log(e)}),(function(){(0,g.Jt)(a.snapshot.ref).then((function(e){console.log("File available at",e),M(e)}))}))}}else console.log("No Image")}()},children:function(t){t.errors,t.touched;var n=t.setFieldValue;return(0,b.jsxs)(p.l0,{className:"flex flex-col gap-2 py-5 duration-300 ".concat(w?"block":"hidden"),children:[(0,b.jsx)("div",{className:"border-b border-b-gray-500"}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(x.Z,{className:"text-white",children:"Your Full Name"}),(0,b.jsx)(m.Z,{onChange:function(e){return n("fullName",e.target.value)},defaultValue:e.fullName,placeholder:e.fullName})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(x.Z,{className:"text-white",children:"Your Password"}),(0,b.jsx)(m.Z,{onChange:function(e){return n("password",e.target.value)},icon:!0,defaultValue:e.password,placeholder:e.password})]})]}),(0,b.jsx)(x.Z,{className:"text-white",children:"Your avatar"}),(0,b.jsx)("input",{type:"file",onChange:function(e){!function(e){try{e.preview=URL.createObjectURL(e)}catch(t){console.log(t)}U(e)}(e.target.files[0])},className:"p-3 border rounded-md"}),_&&(0,b.jsx)("div",{className:"flex items-center justify-center p-5 border",children:(0,b.jsx)("img",{src:_.preview&&_.preview,alt:"",width:"300px"})}),(0,b.jsx)("span",{className:"flex gap-3 mt-5",children:(0,b.jsx)(c.Z,{type:"submit",loading:L,children:"Update"})})]})}}),(0,b.jsx)("div",{className:"border-b border-b-gray-500"}),(0,b.jsxs)("div",{className:"pt-8 ",children:[(0,b.jsxs)("h4",{className:"section-title-primary",children:["My favorite list"," ",(0,b.jsxs)("span",{className:"text-gray-500 ",children:["(",t&&t.length,")"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 gap-10 xs:grid-cols-2 md:grid-cols-3",children:t&&t.length>0&&t.map((function(e){return(0,b.jsx)(l.Z,{movieid:e.id,mediaType:e.type},e.id)}))})]})]}):(0,b.jsxs)("div",{className:"p-10 text-center",children:["You have to"," ",(0,b.jsx)("a",{className:"text-primary",href:"/log-in",children:"sign in"})," ","first!"]})})})}},4809:function(e,t,n){var a=n(4165),r=n(2982),i=n(5861),o=n(9062),s=n(8820),c=n(1665),l=n(1367),d=n(184),u=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,n,i,s){var c,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=8;break}return t.preventDefault(),c=s.listFavorite.filter((function(e){return e.id!==n})),d=(0,o.JU)(l.db,"users",null===s||void 0===s?void 0:s.id),e.next=6,(0,o.r7)(d,{listFavorite:(0,r.Z)(c)}).then((function(){console.log("Success")}));case 6:e.next=9;break;case 8:console.log("Failed");case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();t.Z=function(e){var t=e.id,n=e.mediaType,a=e.className,r=void 0===a?"":a,i=(0,c.a)().userInfo;return(0,d.jsx)("span",{onClick:function(e){return u(e,t,n,i)},className:"cursor-pointer ".concat(r),children:(0,d.jsx)(s.M_L,{})})}},199:function(e,t,n){n.d(t,{R:function(){return u},m:function(){return f}});var a=n(4165),r=n(5861),i=n(9062),o=(n(2791),n(1665)),s=n(1367),c=n(8820),l=n(9085),d=n(184),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n,r,o){var c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=7;break}return t.preventDefault(),c=(0,i.JU)(s.db,"users",o.id),e.next=5,(0,i.r7)(c,{listFavorite:(0,i.vr)({id:n,type:r})}).then((function(){console.log("Success")}));case 5:e.next=8;break;case 7:l.Am.error("You have to sign in first!");case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),f=function(e){var t=e.id,n=e.mediaType,a=(0,o.a)().userInfo;return(0,d.jsxs)("span",{className:"absolute flex items-center justify-center w-8 h-8 leading-none duration-200 rounded-full cursor-pointer hover:gap-3 top-3 right-3 bg-white/30 backdrop-blur-sm group hover:bg-primary hover:w-auto hover:px-3",onClick:function(e){return u(e,t,n,a)},children:[(0,d.jsx)(c.Lfi,{}),(0,d.jsx)("span",{className:"hidden text-transparent group-hover:block group-hover:text-white",children:"Add to favorite"})]})}},9872:function(e,t,n){e.exports=n.p+"static/media/avatar_default.b64c88cbd5bac46288d6.jpg"}}]);
//# sourceMappingURL=651.8e15356e.chunk.js.map